# WebApp — клиентское приложение (Telegram Web App)

## Назначение
WebApp обеспечивает пользовательский интерфейс для онбординга организации, управления доступом, работы с чат‑ассистентом и документами, а также для запуска профильных сценариев (включая генерацию договоров).

## Зона ответственности
- Онбординг: создание организации и заполнение анкеты владельцем.
- Доступ: приглашение пользователей одноразовой ссылкой, вход в рабочее пространство организации, переключение ролей.
- Чат с ассистентом: отправка сообщений, отображение ответов и цитат источников.
- Заметки: просмотр и управление заметками об организации (в рамках прав доступа).
- Документы: загрузка файлов в хранилище, создание записей о документах, отслеживание статуса индексации.
- Договоры: выбор шаблона, заполнение параметров (через форму/диалог), получение и скачивание итогового файла, список сгенерированных договоров.
- Подсказки и формы: удобные сценарии взаимодействия с субагентами (маркетинг/право/финансы).

## Основные сценарии
1. Создание организации и базовой анкеты владельцем.
2. Приглашение сотрудников и совместная работа в рамках одной организации.
3. Ведение диалога с ассистентом с учетом контекста организации и доступных документов.
4. Загрузка документа, отслеживание статуса «индексирован», использование документа в ответах ассистента.
5. Генерация договора по шаблону: заполнение полей → получение готового файла → просмотр в списке генераций.

## Взаимодействия
- Core Service: операции с организациями, пользователями, заметками, документами, шаблонами и сгенерированными договорами.
- LLM Service: чат, вызовы субагентов, инициирование генерации договоров.
- Хранилище файлов: прямая загрузка исходных документов и скачивание готовых файлов.

## Требования к доступу и UX
- Все операции выполняются в контексте выбранной организации пользователя.
- Ролевая модель влияет на доступность действий (например, управление шаблонами доступно только Admin).
- Интерфейс отображает статусы (обработка документа, готовность файла) и источники, использованные в ответах ассистента.

## Что не входит в объем (сейчас)
- Низкоуровневая обработка документов и взаимодействие с векторным поиском.
- Прямое управление моделями ИИ и их параметрами.
